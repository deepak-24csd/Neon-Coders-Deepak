{% extends "base.html" %}
{% block content %}

<h2>ğŸ›‹ Room-wise Appliance Control</h2>
<p>Control appliances and view energy usage for each room.</p>

{% for room, devices in rooms.items() %}
<div class="card">

  <h3>ğŸ  {{ room }}</h3>

  <p>
    âš¡ Energy Usage:
    <strong>{{ room_energy[room] }} kW</strong>
  </p>

  {% for device, state in devices.items() %}
  <div class="device">
    <span>
      {% if device == "Light" %} ğŸ’¡
      {% elif device == "AC" %} â„ï¸
      {% elif device == "Fan" %} ğŸŒ€
      {% else %} ğŸ”Œ {% endif %}
      {{ device }}
    </span>

    <a href="{{ url_for('toggle_appliance', room=room, device=device) }}">
      <button class="{{ 'on' if state else 'off' }}">
        {{ 'ON' if state else 'OFF' }}
      </button>
    </a>
  </div>
  {% endfor %}

</div>
{% endfor %}

{% endblock %}
